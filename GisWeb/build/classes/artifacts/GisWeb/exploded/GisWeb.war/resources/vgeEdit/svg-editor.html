<!DOCTYPE html>
<html>
<!-- removed for now, causes problems in Firefox: manifest="svg-editor.manifest" -->

<head>
    <meta http-equiv="Content-type" content="text/html;charset=UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="chrome=1" />
    <meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=no;" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <link rel="icon" type="image/png" href="images/logo.png" />
    <link rel="stylesheet" href="jgraduate/css/jPicker.css" type="text/css" />
    <link rel="stylesheet" href="jgraduate/css/jgraduate.css" type="text/css" />
    <link rel="stylesheet" href="svg-editor.css" type="text/css" />
    <link rel="stylesheet" href="spinbtn/JQuerySpinBtn.css" type="text/css" />
    <!--{if jquery_release}>
  <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.js"></script>
<!{else}-->
<script src=" http://api.tianditu.com/js/maps.js" type="text/javascript"></script>
    <script type="text/javascript" src="jquery.js"></script>
    <!--{endif}-->
    <script type="text/javascript" src="js-hotkeys/jquery.hotkeys.min.js"></script>
    <script type="text/javascript" src="jquerybbq/jquery.bbq.min.js"></script>
    <script type="text/javascript" src="svgicons/jquery.svgicons.js"></script>
    <script type="text/javascript" src="jgraduate/jquery.jgraduate.min.js"></script>
    <script type="text/javascript" src="spinbtn/JQuerySpinBtn.min.js"></script>
    <script type="text/javascript" src="touch.js"></script>
    <!--{if svg_edit_release}
    <script type="text/javascript" src="svgedit.compiled.js"></script>
    {else}><!{endif}-->
  <script type="text/javascript" src="svg-background-loader.js"></script>
  <script type="text/javascript" src="coordinate-trans.js"></script>

 <script src="svgedit.js"></script>
  <script type="text/javascript" src="contextmenu/jquery.contextMenu.js"></script>
  <script src="pathseg.js"></script>
  <script type="text/javascript" src="browser.js"></script>
  <script type="text/javascript" src="svgtransformlist.js"></script>
  <script type="text/javascript" src="math.js"></script>
  <script type="text/javascript" src="units.js"></script>
  <script type="text/javascript" src="svgutils.js"></script>
  <script type="text/javascript" src="sanitize.js"></script>
  <script type="text/javascript" src="history.js"></script>
  <script type="text/javascript" src="select.js"></script>
  <script type="text/javascript" src="draw.js"></script>
  <script type="text/javascript" src="path.js"></script>
  <script type="text/javascript" src="svgcanvas.js"></script>
  <script type="text/javascript" src="svg-editor.js"></script>
  <script type="text/javascript" src="locale/locale.js"></script>
  <script type="text/javascript" src="contextmenu.js"></script>
  <script type="text/javascript" src="search.js"></script>
  <!--detect dev tools-->
  <script type="text/javascript" src="jdetects.js"></script>

    <!-- you can load extensions here -->
    <!-- <script type="text/javascript" src="extensions/ext-helloworld.js"></script> -->
    <!-- always minified scripts -->
    <script type="text/javascript" src="jquery-ui/jquery-ui-1.8.17.custom.min.js"></script>
    <script type="text/javascript" src="jgraduate/jpicker.js"></script>

    <!-- feeds -->
    <link rel="alternate" type="application/atom+xml" title="SVG-edit General Discussion" href="http://groups.google.com/group/svg-edit/feed/atom_v1_0_msgs.xml" />
    <link rel="alternate" type="application/atom+xml" title="SVG-edit Updates (Issues/Fixes/Commits)" href="http://code.google.com/feeds/p/svg-edit/updates/basic" />



    <!-- Add script with custom handlers here -->
    <title>VGE</title>
</head>

<body>

    <div id="svg_editor">
        <div id="rulers">
            <div id="ruler_corner"></div>
            <div id="ruler_x">
                <div>
                    <canvas height="15"></canvas>
                </div>
            </div>
            <div id="ruler_y">
                <div>
                    <canvas width="15"></canvas>
                </div>
            </div>
        </div>
        <div id="workarea">
            <style id="styleoverrides" type="text/css" media="screen" scoped="scoped"></style>
            <div id="svgcanvas" style="position: absolute; width: 100%; height: 100%; z-index: 1; margin-left: -475px; background-color: transparent;">
            </div>
            <script>

            var div = document.createElement("div");
         	 div.style.position = "absolute";
         	 div.id = "tmap";
         	 // 可以根据参数设置元素外观
         	 div.style.width = "100%";
         	 div.style.height = "100%";
           div.style.zIndex = "0";

        		document.getElementById("workarea").appendChild(div);

            // var map;

          //   $('#svgcanvas').bind("mousewheel",function(evt) {
           //
          //     var delta;
           //
          //   	if(evt.wheelDelta)
          //   		delta = evt.wheelDelta / 3600; // Chrome/Safari
          //   	else
          //   		delta = evt.detail / -90; // Mozilla
          //   	delta = delta*6;
           //
         // 		 if(delta>0) {
         // 				tmap.zoomIn();
           //
          // 		} else{
         // 				tmap.zoomOut();
          // 		}
         // 	 });


            //创建和初始化地图函数：
            	function initMap(){
            		//createMap();//创建地图
                 createTMap();
            		// setMapEvent();//设置地图事件
            		// addMapControl();//向地图添加控件
            		// addMapOverlay();//向地图添加覆盖物
            		// addSvgLayer(1000,550);
            	}

            	function createMap(){
            		map = new BMap.Map("map");
            		map.centerAndZoom(new BMap.Point(121.480237,31.236305),15);
            		// map.addEventListener("dragend", function(){
            		// 	var left = $("#map").children().first().children().first().css("left");
            		// 	var top = $("#map").children().first().children().first().css("top");
            		// 	console.log(left+","+top);
            		// 	$("#svgLayer").css("left",left);
            		// 	$("#svgLayer").css("top",top);
            		// });
            	}
              function createTMap(){
            		tmap=new TMap("tmap");
                tmap.centerAndZoom(new TLngLat(121.37643814087016, 31.321206092834267),15);
            	}

            	function setMapEvent(){
            		map.enableScrollWheelZoom();
            		map.disableKeyboard();
            		map.enableDragging();
            		map.disableDoubleClickZoom()
            	}

            	//向地图添加控件
            	function addMapControl(){
            		var scaleControl = new BMap.ScaleControl({anchor:BMAP_ANCHOR_BOTTOM_LEFT});
            		scaleControl.setUnit(BMAP_UNIT_IMPERIAL);
            		map.addControl(scaleControl);
            		// var navControl = new BMap.NavigationControl({anchor:BMAP_ANCHOR_TOP_LEFT,type:BMAP_NAVIGATION_CONTROL_LARGE});
            		// map.addControl(navControl);
            		// var overviewControl = new BMap.OverviewMapControl({anchor:BMAP_ANCHOR_BOTTOM_RIGHT,isOpen:true});
            		// map.addControl(overviewControl);
            	}
              var map;
              var tmap;
            	initMap();
            </script>
        </div>
        <div id="sidepanels">
            <div id="layerpanel">
                <h3 id="layersLabel">图层</h3>
                <fieldset id="layerbuttons">
                    <div id="layer_new" class="layer_button" title="新建图层"></div>
                    <div id="layer_delete" class="layer_button" title="删除图层"></div>
                    <div id="layer_rename" class="layer_button" title="重命名图层"></div>
                    <div id="layer_up" class="layer_button" title="上移一层"></div>
                    <div id="layer_down" class="layer_button" title="下移一层"></div>
                    <div id="layer_moreopts" class="layer_button" title="更多选项"></div>
                </fieldset>
                <table id="layerlist">
                    <tr class="layer">
                        <td class="layervis"></td>
                        <td class="layername">Layer 1</td>
                    </tr>
                </table>
                <span id="selLayerLabel">移动元素到图层:</span>
                <select id="selLayerNames" title="Move selected elements to a different layer" disabled="disabled">
                    <option selected="selected" value="layer1">Layer 1</option>
                </select>
            </div>
            <div id="sidepanel_handle" title="拖动可改变图层工具大小 [X]">图层</div>
        </div>
        <div id="main_button">
            <div id="main_icon" class="tool_button" title="Main Menu">
                <span>文件</span>
                <div id="logo"></div>
                <div class="dropdown"></div>
            </div>
            <div id="main_menu">
                <!-- File-like buttons: New, Save, Source -->
                <ul>
                    <!-- <li id="tool_clear">
                        <div></div>
                        新建地图 (N)
                    </li>
                    <li id="tool_open" style="display:none;">
                        <div id="fileinputs">
                            <div></div>
                        </div>
                        打开地图
                    </li>
                    <li id="tool_import" style="display:none;">
                        <div id="fileinputs_import">
                            <div></div>
                        </div>
                        导入地图
                    </li> -->
                    <li id="tool_save">
                        <div></div>
                        保存地图 (S)
                    </li>
                    <!-- <li id="tool_export">
                        <div></div>
                        导出成PNG
                    </li> -->
                    <li id="tool_docprops">
                        <div></div>
                        文件属性 (D)
                    </li>
                </ul>
                <button id="tool_prefs_option">
                    编辑器选项
                </button>
            </div>
        </div>
        <div id="tools_top" class="tools_panel">
            <div id="editor_panel">
                <div class="tool_sep"></div>
                <!-- <div class="push_button" id="tool_source" title="svg源码 [U]"></div> -->
                <div class="tool_button" id="tool_wireframe" title="线框模式 [F]"></div>
            </div>
            <!-- History buttons -->
            <div id="history_panel">
                <div class="tool_sep"></div>
                <div class="push_button tool_button_disabled" id="tool_undo" title="撤销 [Z]"></div>
                <div class="push_button tool_button_disabled" id="tool_redo" title="重做 [Y]"></div>
            </div>
            <!-- Buttons when a single element is selected -->
            <div id="selected_panel">
                <div class="toolset">
                    <div class="tool_sep"></div>
                    <div class="push_button" id="tool_clone" title="复制元素 [D]"></div>
                    <div class="push_button" id="tool_delete" title="删除元素 [Delete/Backspace]"></div>
                    <div class="tool_sep"></div>
                    <div class="push_button" id="tool_move_top" title="移至顶层 [ Ctrl+Shift+] ]"></div>
                    <div class="push_button" id="tool_move_bottom" title="移至底层 [ Ctrl+Shift+[ ]"></div>
                    <div class="push_button" id="tool_topath" title="转换为path"></div>
                    <div class="push_button" id="tool_reorient" title="重设path"></div>
                    <div class="push_button" id="tool_make_link" title="创建(超)链接"></div>
                    <div class="tool_sep"></div>
                    <label id="idLabel" title="Identify the element">
                        <span>id:</span>
                        <input id="elem_id" class="attr_changer" data-attr="id" size="10" type="text" style="width:60px"/>
                    </label>
                </div>
                <label id="tool_angle" title="改变转角值" class="toolset">
                    <span id="angleLabel" class="icon_label">转角</span>
                    <input id="angle" size="2" value="0" type="text" />
                </label>
                <div class="toolset" id="tool_blur" title="改变高斯模糊系数">
                    <label>
                        <span id="blurLabel" class="icon_label">模糊</span>
                        <input id="blur" size="2" value="0" type="text" />
                    </label>
                    <div id="blur_dropdown" class="dropdown">
                        <button></button>
                        <ul>
                            <li class="special">
                                <div id="blur_slider"></div>
                            </li>
                        </ul>
                    </div>
                </div>
                <div class="dropdown toolset" id="tool_position" title="布局">
                    <div id="cur_position" class="icon_label">布局</div>
                    <button></button>
                </div>
                <div id="xy_panel" class="toolset">
                    <label>
                        x:
                        <input id="selected_x" class="attr_changer" title="改变X坐标" size="3" data-attr="x" />
                    </label>
                    <label>
                        y:
                        <input id="selected_y" class="attr_changer" title="改变Y坐标" size="3" data-attr="y" />
                    </label>
                </div>
            </div>
            <!-- Buttons when multiple elements are selected -->
            <div id="multiselected_panel">
                <div class="tool_sep"></div>
                <div class="push_button" id="tool_clone_multi" title="克隆元素 [C]"></div>
                <div class="push_button" id="tool_delete_multi" title="删除元素 [Delete/Backspace]"></div>
                <div class="tool_sep"></div>
                <div class="push_button" id="tool_group" title="合并元素 [G]"></div>
                <div class="push_button" id="tool_make_link_multi" title="创建(超)链接"></div>
                <div class="push_button" id="tool_alignleft" title="居左排列"></div>
                <div class="push_button" id="tool_aligncenter" title="垂直居中"></div>
                <div class="push_button" id="tool_alignright" title="居右排列"></div>
                <div class="push_button" id="tool_aligntop" title="置顶排列"></div>
                <div class="push_button" id="tool_alignmiddle" title="水平居中"></div>
                <div class="push_button" id="tool_alignbottom" title="置底排列"></div>
                <label id="tool_align_relative">
                    <span id="relativeToLabel">relative to:</span>
                    <select id="align_relative_to" title="Align relative to ...">
                        <option id="selected_objects" value="selected">selected objects</option>
                        <option id="largest_object" value="largest">largest object</option>
                        <option id="smallest_object" value="smallest">smallest object</option>
                        <option id="page" value="page">page</option>
                    </select>
                </label>
                <div class="tool_sep"></div>
            </div>
            <div id="rect_panel">
                <div class="toolset">
                    <label id="rect_width_tool" title="Change rectangle width">
                        <span id="rwidthLabel" class="icon_label"></span>
                        <input id="rect_width" class="attr_changer" size="3" data-attr="width" />
                    </label>
                    <label id="rect_height_tool" title="Change rectangle height">
                        <span id="rheightLabel" class="icon_label"></span>
                        <input id="rect_height" class="attr_changer" size="3" data-attr="height" />
                    </label>
                </div>
                <label id="cornerRadiusLabel" title="Change Rectangle Corner Radius" class="toolset">
                    <span class="icon_label"></span>
                    <input id="rect_rx" size="3" value="0" type="text" data-attr="Corner Radius" />
                </label>
            </div>
            <div id="image_panel">
                <div class="toolset">
                    <label><span id="iwidthLabel" class="icon_label"></span>
                        <input id="image_width" class="attr_changer" title="Change image width" size="3" data-attr="width" />
                    </label>
                    <label><span id="iheightLabel" class="icon_label"></span>
                        <input id="image_height" class="attr_changer" title="Change image height" size="3" data-attr="height" />
                    </label>
                </div>
                <div class="toolset">
                    <label id="tool_image_url">url:
                        <input id="image_url" type="text" title="Change URL" size="35" />
                    </label>
                    <label id="tool_change_image">
                        <button id="change_image_url" style="display:none;">Change Image</button>
                        <span id="url_notice" title="NOTE: This image cannot be embedded. It will depend on this path to be displayed"></span>
                    </label>
                </div>
            </div>
            <div id="circle_panel">
                <div class="toolset">
                    <label id="tool_circle_cx">cx:
                        <input id="circle_cx" class="attr_changer" title="Change circle's cx coordinate" size="3" data-attr="cx" />
                    </label>
                    <label id="tool_circle_cy">cy:
                        <input id="circle_cy" class="attr_changer" title="Change circle's cy coordinate" size="3" data-attr="cy" />
                    </label>
                </div>
                <div class="toolset">
                    <label id="tool_circle_r">r:
                        <input id="circle_r" class="attr_changer" title="Change circle's radius" size="3" data-attr="r" />
                    </label>
                </div>
            </div>
            <div id="ellipse_panel">
                <div class="toolset">
                    <label id="tool_ellipse_cx">cx:
                        <input id="ellipse_cx" class="attr_changer" title="Change ellipse's cx coordinate" size="3" data-attr="cx" />
                    </label>
                    <label id="tool_ellipse_cy">cy:
                        <input id="ellipse_cy" class="attr_changer" title="Change ellipse's cy coordinate" size="3" data-attr="cy" />
                    </label>
                </div>
                <div class="toolset">
                    <label id="tool_ellipse_rx">rx:
                        <input id="ellipse_rx" class="attr_changer" title="Change ellipse's x radius" size="3" data-attr="rx" />
                    </label>
                    <label id="tool_ellipse_ry">ry:
                        <input id="ellipse_ry" class="attr_changer" title="Change ellipse's y radius" size="3" data-attr="ry" />
                    </label>
                </div>
            </div>
            <div id="line_panel">
                <div class="toolset">
                    <label id="tool_line_x1">x1:
                        <input id="line_x1" class="attr_changer" title="Change line's starting x coordinate" size="3" data-attr="x1" />
                    </label>
                    <label id="tool_line_y1">y1:
                        <input id="line_y1" class="attr_changer" title="Change line's starting y coordinate" size="3" data-attr="y1" />
                    </label>
                </div>
                <div class="toolset">
                    <label id="tool_line_x2">x2:
                        <input id="line_x2" class="attr_changer" title="Change line's ending x coordinate" size="3" data-attr="x2" />
                    </label>
                    <label id="tool_line_y2">y2:
                        <input id="line_y2" class="attr_changer" title="Change line's ending y coordinate" size="3" data-attr="y2" />
                    </label>
                </div>
            </div>
            <div id="text_panel">
                <div class="toolset">
                    <div class="tool_button" id="tool_bold" title="Bold Text [B]"><span></span>B</div>
                    <div class="tool_button" id="tool_italic" title="Italic Text [I]"><span></span>i</div>
                </div>
                <div class="toolset" id="tool_font_family">
                    <label>
                        <!-- Font family -->
                        <input id="font_family" type="text" title="Change Font Family" size="12" />
                    </label>
                    <div id="font_family_dropdown" class="dropdown">
                        <button></button>
                        <ul>
                            <li style="font-family:serif">Serif</li>
                            <li style="font-family:sans-serif">Sans-serif</li>
                            <li style="font-family:cursive">Cursive</li>
                            <li style="font-family:fantasy">Fantasy</li>
                            <li style="font-family:monospace">Monospace</li>
                        </ul>
                    </div>
                </div>
                <label id="tool_font_size" title="Change Font Size">
                    <span id="font_sizeLabel" class="icon_label"></span>
                    <input id="font_size" size="3" value="0" type="text" />
                </label>
                <!-- Not visible, but still used -->
                <input id="text" type="text" size="35" />
            </div>
            <!-- formerly gsvg_panel -->
            <div id="container_panel">
                <div class="tool_sep"></div>
                <!-- Add viewBox field here? -->
                <label id="group_title" title="Group identification label">
                    <span>label:</span>
                    <input id="g_title" data-attr="title" size="10" type="text" />
                </label>
            </div>
            <div id="use_panel">
                <div class="push_button" id="tool_unlink_use" title="Break link to reference element (make unique)"></div>
            </div>
            <div id="g_panel">
                <div class="push_button" id="tool_ungroup" title="Ungroup Elements [G]"></div>
            </div>
            <!-- For anchor elements -->
            <div id="a_panel">
                <label id="tool_link_url" title="Set link URL (leave empty to remove)">
                    <span id="linkLabel" class="icon_label"></span>
                    <input id="link_url" type="text" size="35" />
                </label>
            </div>
            <div id="path_node_panel">
                <div class="tool_sep"></div>
                <div class="tool_button push_button_pressed" id="tool_node_link" title="Link Control Points"></div>
                <div class="tool_sep"></div>
                <label id="tool_node_x">x:
                    <input id="path_node_x" class="attr_changer" title="Change node's x coordinate" size="3" data-attr="x" />
                </label>
                <label id="tool_node_y">y:
                    <input id="path_node_y" class="attr_changer" title="Change node's y coordinate" size="3" data-attr="y" />
                </label>
                <select id="seg_type" title="Change Segment type">
                    <option id="straight_segments" selected="selected" value="4">Straight</option>
                    <option id="curve_segments" value="6">Curve</option>
                </select>
                <div class="tool_button" id="tool_node_clone" title="Clone Node"></div>
                <div class="tool_button" id="tool_node_delete" title="Delete Node"></div>
                <div class="tool_button" id="tool_openclose_path" title="Open/close sub-path"></div>
                <div class="tool_button" id="tool_add_subpath" title="Add sub-path"></div>
            </div>
            <div style="float:right;">

                <input id="tool_input" type="text"  placeholder="Serach" style="border-radius:5px;width:140px;">
                <input id="tool_search" onclick="search_content()" class="btn btn-default" type="submit" value="search" style="height:23px;margin-top:5px;padding:2px;border-radius:5px;">

            </div>
        </div>
        <!-- tools_top -->
        <div id="cur_context_panel">
        </div>
        <div id="tools_left" class="tools_panel">
            <div class="tool_button" id="tool_select" title="选择工具(鼠标左键点击选中元素)"></div>
            <div class="tool_button" id="tool_fhpath" title="画笔工具"></div>
            <div class="tool_button" id="tool_line" title="直线工具"></div>
            <div class="tool_button flyout_current" id="tools_rect_show" title="Square/Rect Tool">
                <div class="flyout_arrow_horiz"></div>
            </div>
            <div class="tool_button flyout_current" id="tools_ellipse_show" title="Ellipse/Circle Tool">
                <div class="flyout_arrow_horiz"></div>
            </div>
            <!-- finalized: add hotel button -->
            <div class="tool_button flyout_current" id="tools_image_show" title="image/hotel/user">
                <div class="flyout_arrow_horiz"></div>
            </div>
            <div class="tool_button" id="tool_path" title="路径 工具"></div>
            <div class="tool_button" id="tool_text" title="文本 工具"></div>
            <!-- <div class="tool_button" id="tool_image" title="Image Tool"></div> finalized: remove new image button -->
            <div class="tool_button" id="tool_zoom_out" title="放大 工具 [Ctrl+Up/Down]"></div>
            <div class="tool_button" id="tool_zoom_in" title="缩小 工具 [Ctrl+Up/Down]"></div>
            <div class="tool_button" id="tool_locate" title="定位点"></div>
            <!-- batch Import -->
            <div class="tool_button" id="tool_batchImp" title="批量导入">
                <input type="file" style="opacity:0;position:absolute;height:50px" onchange="batchImp(this)"/>
            </div>
            <div class="tool_button" id="tool_help" title="提示信息"></div>
            <div style="display: none">
                <div id="tool_rect" title="矩形"></div>
                <div id="tool_square" title="长方形"></div>
                <div id="tool_fhrect" title="一笔矩形"></div>
                <div id="tool_ellipse" title="椭圆"></div>
                <div id="tool_circle" title="圆形"></div>
                <div id="tool_fhellipse" title="一笔圆形"></div>
                <!-- finalized: add hotel button -->
                <div id="tool_image" title="地标"></div>
                <div id="tool_hotel" title="宾馆"></div>
                <div id="tool_user" title="自定义"></div>
            </div>
        </div>
        <div id="tools_bottom" class="tools_panel">
            <!-- Zoom buttons -->
            <div id="zoom_panel" class="toolset" title="视图缩放比例">
                <label>
                    <span id="zoomLabel" class="zoom_tool icon_label"></span>
                    <input id="zoom" size="3" value="100" type="text" />
                </label>
                <div id="zoom_dropdown" class="dropdown">
                    <button></button>
                    <ul>
                        <li>1000%</li>
                        <li>400%</li>
                        <li>200%</li>
                        <li>100%</li>
                        <li>50%</li>
                        <li>25%</li>
                        <li id="fit_to_canvas" data-val="canvas">Fit to canvas</li>
                        <li id="fit_to_sel" data-val="selection">Fit to selection</li>
                        <li id="fit_to_layer_content" data-val="layer">Fit to layer content</li>
                        <li id="fit_to_all" data-val="content">Fit to all content</li>
                        <li>100%</li>
                    </ul>
                </div>
                <div class="tool_sep"></div>
            </div>
            <div id="tools_bottom_2">
                <div id="color_tools">
                    <div class="color_tool" id="tool_fill" title="填充色">
                        <label class="icon_label" for="fill_color">填充</label>
                        <div class="color_block">
                            <div id="fill_bg"></div>
                            <div id="fill_color" class="color_block"></div>
                        </div>
                    </div>
                    <div class="color_tool" id="tool_stroke">
                        <label class="icon_label">线框</label>
                        <div class="color_block">
                            <div id="stroke_bg"></div>
                            <div id="stroke_color" class="color_block" title="线框色"></div>
                        </div>
                        <label class="stroke_label">
                            <input id="stroke_width" title="粗调线宽度(单位:1), 按住shift点击微调(单位:0.1)" size="2" value="5" type="text" data-attr="Stroke Width" />
                        </label>
                        <div id="toggle_stroke_tools" title="显示/隐藏更多工具"></div>
                        <label class="stroke_tool">
                            <select id="stroke_style" title="线型">
                                <option selected="selected" value="none">&mdash;</option>
                                <option value="2,2">...</option>
                                <option value="5,5">- -</option>
                                <option value="5,2,2,2">- .</option>
                                <option value="5,2,2,2,2,2">- ..</option>
                            </select>
                        </label>
                        <div class="stroke_tool dropdown" id="stroke_linejoin">
                            <div id="cur_linejoin" title="Linejoin: Miter">接线</div>
                            <button></button>
                        </div>
                        <div class="stroke_tool dropdown" id="stroke_linecap">
                            <div id="cur_linecap" title="Linecap: Butt">线端</div>
                            <button></button>
                        </div>
                    </div>
                    <div class="color_tool" id="tool_opacity" title="改变元素透明度">
                        <label>
                            <span id="group_opacityLabel" class="icon_label">透明</span>
                            <input id="group_opacity" size="3" value="100" type="text" />
                        </label>
                        <div id="opacity_dropdown" class="dropdown">
                            <button></button>
                            <ul>
                                <li>0%</li>
                                <li>25%</li>
                                <li>50%</li>
                                <li>75%</li>
                                <li>100%</li>
                                <li class="special">
                                    <div id="opac_slider"></div>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <div id="tools_bottom_3">
                <div id="palette_holder">
                    <div id="palette" title="点击改变填充色, 按住shift点击改变线框色"></div>
                </div>
            </div>
            <!-- <div id="copyright"><span id="copyrightLabel">Powered by</span> <a href="http://svg-edit.googlecode.com/" target="_blank">SVG-edit v2.6-beta</a></div> -->
        </div>
        <div id="option_lists" class="dropdown">
            <ul id="linejoin_opts">
                <li class="tool_button current" id="linejoin_miter" title="接头:斜接">斜接</li>
                <li class="tool_button" id="linejoin_round" title="接头:圆接">圆接</li>
                <li class="tool_button" id="linejoin_bevel" title="接头:弧接">切接</li>
            </ul>
            <ul id="linecap_opts">
                <li class="tool_button current" id="linecap_butt" title="线端:长端">长端</li>
                <li class="tool_button" id="linecap_square" title="线端:短端">短端</li>
                <li class="tool_button" id="linecap_round" title="线端:圆端">圆端</li>
            </ul>
            <ul id="position_opts" class="optcols3">
                <li class="push_button" id="tool_posleft" title="居左">居左</li>
                <li class="push_button" id="tool_poscenter" title="垂直居中">垂中</li>
                <li class="push_button" id="tool_posright" title="居右">居右</li>
                <li class="push_button" id="tool_postop" title="置顶">置顶</li>
                <li class="push_button" id="tool_posmiddle" title="水平居中">水中</li>
                <li class="push_button" id="tool_posbottom" title="置底">置底</li>
            </ul>
        </div>
        <!-- hidden divs -->
        <div id="color_picker"></div>
    </div>
    <!-- svg_editor -->
    <div id="svg_source_editor">
        <div id="svg_source_overlay"></div>
        <div id="svg_source_container">
            <div id="tool_source_back" class="toolbar_button">
                <button id="tool_source_save">Apply Changes</button>
                <button id="tool_source_cancel">Cancel</button>
            </div>
            <div id="save_output_btns">
                <p id="copy_save_note">Copy the contents of this box into a text editor, then save the file with a .svg extension.</p>
                <button id="copy_save_done">Done</button>
            </div>
            <form>
                <textarea id="svg_source_textarea" spellcheck="false"></textarea>
            </form>
        </div>
    </div>
    <div id="svg_docprops">
        <div id="svg_docprops_overlay"></div>
        <div id="svg_docprops_container">
            <div id="tool_docprops_back" class="toolbar_button">
                <button id="tool_docprops_save">确认</button>
                <button id="tool_docprops_cancel">取消</button>
            </div>
            <fieldset id="svg_docprops_docprops">
                <legend id="svginfo_image_props">图片属性</legend>
                <label>
                    <span id="svginfo_title">标题：</span>
                    <input type="text" id="canvas_title" />
                </label>
                <fieldset id="change_resolution">
                    <legend id="svginfo_dim">绘图选项</legend>
                    <label><span id="svginfo_width">宽度：</span>
                        <input type="text" id="canvas_width" size="6" />
                    </label>
                    <label><span id="svginfo_height">高度：</span>
                        <input type="text" id="canvas_height" size="6" />
                    </label>
                    <label>
                        <select id="resolution">
                            <option id="selectedPredefined" selected="selected">选择预定义：</option>
                            <option>640x480</option>
                            <option>800x600</option>
                            <option>1024x768</option>
                            <option>1280x960</option>
                            <option>1600x1200</option>
                            <option id="fitToContent" value="content">Fit to Content</option>
                        </select>
                    </label>
                </fieldset>
                <fieldset id="image_save_opts">
                    <legend id="includedImages">包括的图片</legend>
                    <label>
                        <input type="radio" name="image_opt" value="embed" checked="checked" /> <span id="image_opt_embed">Embed data (local files)</span> </label>
                    <label>
                        <input type="radio" name="image_opt" value="ref" /> <span id="image_opt_ref">Use file reference</span> </label>
                </fieldset>
            </fieldset>
        </div>
    </div>
    <div id="svg_prefs">
        <div id="svg_prefs_overlay"></div>
        <div id="svg_prefs_container">
            <div id="tool_prefs_back" class="toolbar_button">
                <button id="tool_prefs_save">OK</button>
                <button id="tool_prefs_cancel">Cancel</button>
            </div>
            <fieldset>
                <legend id="svginfo_editor_prefs">Editor Preferences</legend>
                <label><span id="svginfo_lang">Language:</span>
                    <!-- Source: http://en.wikipedia.org/wiki/Language_names -->
                    <select id="lang_select">
                        <option id="lang_ar" value="ar">العربية</option>
                        <option id="lang_cs" value="cs">Čeština</option>
                        <option id="lang_de" value="de">Deutsch</option>
                        <option id="lang_en" value="en" selected="selected">English</option>
                        <option id="lang_es" value="es">Español</option>
                        <option id="lang_fa" value="fa">فارسی</option>
                        <option id="lang_fr" value="fr">Français</option>
                        <option id="lang_fy" value="fy">Frysk</option>
                        <option id="lang_hi" value="hi">&#2361;&#2367;&#2344;&#2381;&#2342;&#2368;, &#2361;&#2367;&#2306;&#2342;&#2368;</option>
                        <option id="lang_it" value="it">Italiano</option>
                        <option id="lang_ja" value="ja">日本語</option>
                        <option id="lang_nl" value="nl">Nederlands</option>
                        <option id="lang_pt-BR" value="pt-BR">Português (BR)</option>
                        <option id="lang_ro" value="ro">Română</option>
                        <option id="lang_ru" value="ru">Русский</option>
                        <option id="lang_sk" value="sk">Slovenčina</option>
                        <option id="lang_zh-TW" value="zh-TW">繁體中文</option>
                    </select>
                </label>
                <label><span id="svginfo_icons">Icon size:</span>
                    <select id="iconsize">
                        <option id="icon_small" value="s">Small</option>
                        <option id="icon_medium" value="m" selected="selected">Medium</option>
                        <option id="icon_large" value="l">Large</option>
                        <option id="icon_xlarge" value="xl">Extra Large</option>
                    </select>
                </label>
                <fieldset id="change_background">
                    <legend id="svginfo_change_background">Editor Background</legend>
                    <div id="bg_blocks"></div>
                    <label><span id="svginfo_bg_url">URL:</span>
                        <input type="text" id="canvas_bg_url" />
                    </label>
                    <p id="svginfo_bg_note">Note: Background will not be saved with image.</p>
                </fieldset>
                <fieldset id="change_grid">
                    <legend id="svginfo_grid_settings">Grid</legend>
                    <label><span id="svginfo_snap_onoff">Snapping on/off</span>
                        <input type="checkbox" value="snapping_on" id="grid_snapping_on">
                    </label>
                    <label><span id="svginfo_snap_step">Snapping Step-Size:</span>
                        <input type="text" id="grid_snapping_step" size="3" value="10" />
                    </label>
                </fieldset>
                <fieldset id="units_rulers">
                    <legend id="svginfo_units_rulers">Units & Rulers</legend>
                    <label><span id="svginfo_rulers_onoff">Show rulers</span>
                        <input type="checkbox" value="show_rulers" id="show_rulers" checked></input>
                    </label>
                    <label>
                        <span id="svginfo_unit">Base Unit:</span>
                        <select id="base_unit">
                            <option value="px">Pixels</option>
                            <option value="cm">Centimeters</option>
                            <option value="mm">Millimeters</option>
                            <option value="in">Inches</option>
                            <option value="pt">Points</option>
                            <option value="pc">Picas</option>
                            <option value="em">Ems</option>
                            <option value="ex">Exs</option>
                        </select>
                    </label>
                </fieldset>
            </fieldset>
        </div>
    </div>
    <div id="dialog_box">
        <div id="dialog_box_overlay"></div>
        <div id="dialog_container">
            <div id="dialog_content"></div>
            <div id="dialog_buttons"></div>
        </div>
    </div>
    <div id="editBox">
        <b>属性编辑</b><hr>
        <div id="editAttr"></div>
        <div id="editButt"><button>应用</button><button onclick="hideEdit();">取消</button></div>
    </div>
    <div id="locateBox">
        <b>请输入元素坐标</b><hr>
        <div id="locatePt">经度:<input id="locateLon"></input>纬度:<input id="locateLat"></input></div>
        <div id="locateButt"><button onclick="locatePt();">搜索</button><button onclick="locateCancel();">取消</button></div>
    </div>
    <ul id="cmenu_canvas" class="contextMenu">
        <li><a href="#edit">编辑</a></li>
        <li><a href="#cut">剪切</a></li>
        <li><a href="#copy">复制</a></li>
        <li><a href="#paste">粘贴</a></li>
        <li><a href="#paste_in_place">粘贴至此处</a></li>
        <li class="separator"><a href="#delete">删除</a></li>
        <li class="separator"><a href="#group">合并<span class="shortcut">G</span></a></li>
        <li><a href="#ungroup">分离<span class="shortcut">G</span></a></li>
        <li class="separator"><a href="#move_front">Bring to Front<span class="shortcut">SHFT+CTRL+]</span></a></li>
        <li><a href="#move_up">Bring Forward<span class="shortcut">CTRL+]</span></a></li>
        <li><a href="#move_down">Send Backward<span class="shortcut">CTRL+[</span></a></li>
        <li><a href="#move_back">Send to Back<span class="shortcut">SHFT+CTRL+[</span></a></li>
    </ul>
    <ul id="cmenu_layers" class="contextMenu">
        <li><a href="#dupe">复制图层...</a></li>
        <li><a href="#delete">删除图层</a></li>
        <li><a href="#merge_down">Merge Down</a></li>
        <li><a href="#merge_all">Merge All</a></li>
    </ul>
    <script>
    /* jdetects.create(function(status) {
    if (status=="on") {
       // while(1){}
       //alert("spying");
    };
}); */



    function delAr(newArNo) {
        $("#newAr" + newArNo).remove();
    };

    function insertAr() {};

    function getFormJson(form) {
        var o = {};
        var a = $(form).serializeArray();
        $.each(a, function() {
            if (o[this.name] !== undefined) {
                if (!o[this.name].push) {
                    o[this.name] = [o[this.name]];
                }
                o[this.name].push(this.value || '');
            } else {
                o[this.name] = this.value || '';
            }
        });
        return o;
    };

    function hideEdit(){
            $("#editBox").css("display","none");
        };

    function locatePt(){
    	if(!isBaseLoaded){
			initLocation($('#workarea')[0]);
		}
        var lon = $('#locateLon').val();
        var lat = $('#locateLat').val();
        if(lon!=""&&lat!=""){
        	var coord = transLonLatToCoordinate(lon,lat);
        	svgEditor.updateCanvas(false,{x:parseFloat(coord.x),y:parseFloat(coord.y)});
        	reloadBaseMap($('#workarea')[0]);
        }
        $('#locateBox').css('display','none');
    }
    function locateCancel(){
        $('#locateBox').css('display','none');
    }

    function batchImp(source) {
        var file = source.files[0];
        if(window.FileReader) {
            var fr = new FileReader();
            fr.onloadend = function(e) {
                console.log(e.target.result);
                Info = e.target.result.split('\n');
                    for(i=0;i<Info.length;i++){
                    InfoLine = Info[i].split(',');
                    var imgUrl = "/resource/icon/logo";
                    switch(InfoLine[0]){
                        case 'a':
                            imgUrl = "/resource/icon/logo";
                            break;
                        case 'b':
                            imgUrl =  "/resource/icon/su";
                            break;
                    }
                    svgCanvas.addSvgElementFromJson({
                    "element": "image",
                    "attr": {
                        "x": InfoLine[1],
                        "y": InfoLine[2],
                        "width": InfoLine[3],
                        "height": InfoLine[4],
                        "id": svgCanvas.getNextId(),
                        "opacity": 1,
                        "style": "pointer-events:inherit",
                        "xmlns:xlink": "http://www.w3.org/1999/xlink",
                        "xlink:href": imgUrl
                        }
                    })
                }
            };
            fr.readAsText(file);
        }
    }
    </script>
</body>

</html>
